# This file is auto-generated by openmediavault (https://www.openmediavault.org)
# WARNING: Do not edit this file, your changes will get lost.

# pihole
# 
version: "3"
services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    ports:
      - 53:53/tcp
      - 53:53/udp
    #  - "67:67/udp" # Only required if you are using Pi-hole as your DHCP server
      - 80:80/tcp
    volumes:
      - ./etc-pihole:/etc/pihole
      - ./etc-dnsmasq.d:/etc/dnsmasq.d
      - /srv/mergerfs/NAS/Backups/pihole:/backups
    restart: unless-stopped
    env_file: pihole.env
    cap_add:
      - NET_ADMIN
    hostname: pihole
    domainname: fritz.box
    networks: 
      macvlan0:
          ipv4_address: 192.168.1.253 # adjust the IP address as needed; this is the IP to reach ioBroker
      swag:

networks:
  macvlan0:
    external: true
  swag:
    external: true
# Working Tutorial:
# https://blog.ivansmirnov.name/set-up-pihole-using-docker-macvlan-network/

 # pihole_net:          # Name of the Network in docker / portainer
 #   driver: macvlan
 #   driver_opts:
 #     parent: br0     # Name of the Network Interface (check in OMV GUI in`Network >> Interfaces >> Name)
 #   ipam:
 #     config:
 #       - subnet: 192.168.1.0/24
 #         gateway: 192.168.1.1          # IP of router
 #         ip_range: 192.168.1.6/32    # change IP and netmask as needed; to calculate visit for example http://jodies.de/ipcalc
